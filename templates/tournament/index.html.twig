{% extends 'base.html.twig' %}

{% block title %}Tournois{% endblock %}

{% block body %}
<section class="tournament-hero">
  <div class="overlay"></div>
  <div class="hero-content">
    <h1>Liste des Tournois</h1>
    <p>Affronte dâ€™autres challengers et prouve ta valeur dans lâ€™arÃ¨ne ğŸ”¥</p>
  </div>
</section>

<section class="tournament-list">
  {% if tournaments is empty %}
    <p class="no-tournament">Aucun tournoi disponible pour le moment âš”ï¸</p>
  {% else %}
    <div class="tournament-grid">
      {% for tournament in tournaments %}
        <div class="tournament-card">
          <a href="{{ path('app_tournament_show', { id: tournament.id }) }}" class="card-link">
            <div class="tournament-img">
              <img 
                src="{{ tournament.image ? asset('img/tournaments/' ~ tournament.image) : asset('images/tournaments/default.jpg') }}" 
                alt="Image du tournoi {{ tournament.name }}">
            </div>

            <div class="tournament-info">
              <h2>{{ tournament.name }}</h2>
              <p class="location">ğŸ“ {{ tournament.location }}</p>
              <p class="date">ğŸ“… {{ tournament.date|date('d/m/Y') }}</p>
            </div>
          </a>

          <div class="tournament-actions">
            {% if app.user %}{% if app.user in tournament.referees %}
  <p>ğŸ‘¨â€âš–ï¸ Vous Ãªtes arbitre de ce tournoi.</p>
{% endif %}
              {% if tournament.id in registeredTournaments %}
                <button class="btn-joined" disabled>DÃ©jÃ  inscrit âœ…</button>
                {% elseif tournament.tournamentParticipants|length >= tournament.availableSlots %}
      <button class="btn-disabled" disabled>Complet âŒ</button>
              {% else %}
                <a href="{{ path('app_tournament_register', { id: tournament.id }) }}" class="btn-join">Sâ€™inscrire ğŸ”¥</a>
              {% endif %}
            {% else %}
              <a href="{{ path('app_login') }}" class="btn-login-neon">Se connecter</a>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  {% endif %}
</section>
{% endblock %}