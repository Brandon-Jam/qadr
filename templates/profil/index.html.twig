


{% extends 'base.html.twig' %}

{% block body %}
<section class="profile-page">

  {# ğŸ”¹ 1ï¸âƒ£ IdentitÃ© du joueur #}
  <div class="profile-header">
  <div class="player-avatar">
   <img src="{{ asset('img/avatars/' ~ user.avatar) }}" alt="Avatar joueur">
   </div>
    <div class="profile-info">
      <h1 class="neon-text">{{ user.pseudo }}</h1>
      <p class="profile-rank">Rang : <span class="highlight">Joueur confirmÃ©</span></p>
      <p class="profile-level">Niveau : <span class="highlight">12</span></p>
    </div>
    <div class="logout-zone">
    <a href="{{ path('app_logout') }}" class="btn-logout">
        ğŸšª Se dÃ©connecter
    </a>
</div>
  </div>

  <hr class="divider">

  {# ğŸ”¹ 2ï¸âƒ£ Performance gÃ©nÃ©rale (dÃ©jÃ  fait, juste Ã  inclure ici) #}
  <section class="profile-stats">
  <h2 class="neon-title">âš”ï¸ Statistiques gÃ©nÃ©rales</h2>

  <div class="stats-grid">
    <div class="stat-card">
      <p class="stat-value">{{ stats.totalMatches }}</p>
      <p class="stat-label">Matchs jouÃ©s</p>
    </div>
    <div class="stat-card">
      <p class="stat-value">{{ stats.wins }}</p>
      <p class="stat-label">Victoires</p>
    </div>
    <div class="stat-card">
      <p class="stat-value">{{ stats.losses }}</p>
      <p class="stat-label">DÃ©faites</p>
    </div>
    <div class="stat-card">
      <p class="stat-value">{{ stats.winRate }}%</p>
      <p class="stat-label">Taux de victoire</p>
    </div>
    <div class="stat-card">
      <p class="stat-value">{{ stats.tournaments }}</p>
      <p class="stat-label">Tournois jouÃ©s</p>
    </div>
    <div class="stat-card">
      <p class="stat-value">{{ stats.avgScore }}</p>
      <p class="stat-label">Score moyen</p>
    </div>
  </div>
</section>
  
  <hr class="divider">

  {# ğŸ”¹ 3ï¸âƒ£ Cartes et stratÃ©gie #}
  <section class="profile-cards">
    <h2 class="neon-title">ğŸ´ Vos cartes & stratÃ©gie</h2>
    {% if participations is not empty %}
      <div class="cards-summary">
        {% set totalCards = 0 %}
        {% for p in participations %}
          {% for card in p.cards %}
            {% set totalCards = totalCards + card.quantity %}
          {% endfor %}
        {% endfor %}
        <p>Total de cartes possÃ©dÃ©es : <span class="highlight">{{ totalCards }}</span></p>
        <p>Style dominant : <span class="highlight">Offensif âš”ï¸</span></p>
      </div>
    {% else %}
      <p class="empty-text">Aucune carte enregistrÃ©e pour le moment.</p>
    {% endif %}
  </section>

  <hr class="divider">

  {# ğŸ”¹ 4ï¸âƒ£ CrÃ©dits & Ã©conomie #}
  <section class="profile-economy">
    <h2 class="neon-title">ğŸ’° CrÃ©dits & Ã©conomie</h2>
    {% set totalCredits = 0 %}
    {% for p in participations %}
      {% set totalCredits = totalCredits + p.credits %}
    {% endfor %}
    <div class="credits-summary">
      <p>Total de crÃ©dits gagnÃ©s : <span class="highlight">{{ totalCredits }}</span></p>
      <p>Moyenne par tournoi : <span class="highlight">{{ totalCredits / (participations|length ?: 1) | round(1) }}</span></p>
      <p>Tournoi le plus rentable : <span class="highlight">Qadr Arena</span></p>
    </div>
  </section>

  <hr class="divider">

  {# ğŸ”¹ 5ï¸âƒ£ Historique des tournois #}
  <section class="profile-history">
    <h2 class="neon-title">ğŸ† Historique des tournois</h2>
    {% if participations is not empty %}
      <div class="tournament-list">
        {% for p in participations %}
          <div class="tournament-card">
            <h3>{{ p.tournament.name }}</h3>
            <p>CrÃ©dits gagnÃ©s : {{ p.credits }}</p>
            <p>Statut : <span class="highlight">En cours</span></p>
            <a href="{{ path('app_tournament_profil', { id: p.tournament.id }) }}" class="btn-neon">Voir profil tournoi</a>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="empty-text">Tu nâ€™as encore participÃ© Ã  aucun tournoi.</p>
    {% endif %}
  </section>

  <hr class="divider">

  {# ğŸ”¹ 6ï¸âƒ£ Badges & progression (bonus fun) #}
  <section class="profile-badges">
    <h2 class="neon-title">ğŸ–ï¸ Badges & progression</h2>
    <div class="badges-grid">
      <div class="badge unlocked">
        ğŸ¥‡ PremiÃ¨re victoire
      </div>
      <div class="badge unlocked">
        ğŸ”¥ 10 matchs jouÃ©s
      </div>
      <div class="badge locked">
        ğŸ’ Champion dâ€™un tournoi
      </div>
      <div class="badge locked">
        ğŸ´ Collectionneur de cartes
      </div>
    </div>
  </section>

</section>
{% endblock %}
